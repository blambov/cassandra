keyspace: ks

keyspace_definition: |
  CREATE KEYSPACE ks WITH replication = { 'class': 'SimpleStrategy', 'replication_factor': 2 };

table: users

table_definition: |

  CREATE TABLE users (
    id int,
    subid int,
    username text,
    email text,
    age int,
    PRIMARY KEY(id, subid)
  ) WITH compaction = {'class': 'SizeTieredCompactionStrategy'};
  
columnspec:
  - name: id
    population: uniform(10000000..19999000)
  - name: subid
    population: uniform(100000..101999)
    cluster: gaussian(5..15)
  - name: username
    size: uniform(8..20)
    population: uniform(1..1M)
  - name: email
    size: uniform(1000..2000)
    population: uniform(1..1M)
  - name: age
    population: gaussian(10..100)

insert:
  partitions: fixed(1)
  select: fixed(1)/10
  batchtype: UNLOGGED

queries:
  read:
    cql: select * from users where id = ?
    fields: samerow
  add:
    cql: INSERT INTO users (id, subid, username, email, age) VALUES (?, ?, ?, ?, ?)
    fields: samerow
  celldelete:
    cql: INSERT INTO users (id, subid, username, email, age) VALUES (?, ?, ?, null, ?)
    fields: samerow
  clusteringdelete:
    cql: DELETE FROM users where id = ? and subid = ?
    fields: samerow
  clusteringdeletemultirow:
    cql: DELETE FROM users where id = ? and subid = ?
    fields: multirow
  rangedelete:
    cql: DELETE FROM users where id = ? and subid > ? and subid < ?
    fields: multirow
